syntax = "proto3";

package aserto.directory.importer.v2;

option go_package = "github.com/aserto-dev/go-directory/aserto/directory/importer/v2;importer"; 

import "google/rpc/status.proto";

import "aserto/directory/v2/object.proto";
import "aserto/directory/v2/relation.proto";

service Importer {
    rpc Import(stream ImportRequest) returns (stream ImportResponse) {};
}

message ImportRequest {
    Opcode op_code                                      = 1;    // 
    oneof msg_oneof {
        aserto.directory.v2.Object object               = 2;    // 
        aserto.directory.v2.ObjectType object_type      = 3;    // 
        aserto.directory.v2.Relation relation           = 4;    // 
        aserto.directory.v2.RelationType relation_type  = 5;    // 
        aserto.directory.v2.Permission permission       = 6;    //
    }
}

message ImportResponse {
    google.rpc.Status error                             = 1;    // 
}

enum Opcode {
    OPCODE_UNKNOWN = 0;
    OPCODE_SET     = 1;
    OPCODE_DELETE  = 2;
}
